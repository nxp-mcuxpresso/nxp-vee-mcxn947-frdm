# MicroEJ Core Validation

## Overview

This project contains test cases aimed at validating the correct runtime execution 
of a VEE Port connected to a Board Support Package (BSP).
 
Tests are written as JUnit test cases, thus the main entry point is automatically generated by the SDK.

Tests can be launched:

-  as a standard Application by using a local launcher.
-  as a VEE Port Test Suite by building the module.

## Requirements

- A VEE Port built from an Architecture version `7.0.0` or higher.
- See VEE Port Test Suites [documentation](../README.md).

## Usage

### Launcher Mode

- Add the [core_test_natives.c](src/test/c/src/core_test_natives.c) file in your BSP and add it as a source file. These natives allow to test the FPU configuration and SNI native calling convention.
- For a best result in the Java Round Robin test, disable all the C native tasks except the MicroEJ task.
- Follow the configuration and execution steps described in VEE Port Test Suites [documentation](../README.md).

### VEE Port Test Suite Mode

-  Follow the configuration and execution steps described in VEE Port Test Suites [documentation](../README.md).

## Dependencies

*All dependencies are retrieved transitively by Gradle*.

## Troubleshooting

### The test blocks during the Java round robin test under FreeRTOS

Issue: 

- The test of `LLMJVM_IMPL_scheduleRequest` blocks at the following
  step: `Starting tasks and wait for 10 seconds...`.

Solution: 

- Ensure the JVM native C task has a priority lower than the FreeRTOS
  timer task defined in `FreeRTOSConfig.h` (`configTIMER_TASK_PRIORITY`).

### VEE Port Test Suite issues

See VEE Port Test Suites [documentation](../README.md).

## Source

N/A

## Restrictions

None.
